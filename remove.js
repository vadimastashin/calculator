(function($){'use strict';var num_of_appliances=appliances_data.length;var r_id=0;add_row();$('#add_row').on('click',function(){add_row()});$('#remove_row').on('click',function(){remove_row()});$('#wpeuc_table').on('change','select.form-control',function(){var _id=$(this).attr('id');var _val=$(this).val();appliances_data.forEach(function(appl){if(appl.id==_val){$('#pr'+_id).val(appl.power_rating);$('#adu'+_id).val(appl.average_daily_usage)}})});$('#calculate').on('click',function(){var num_calc_table_rows=$('#wpeuc_table tr').length-1;var total=0;for(var i=1;i<=num_calc_table_rows;i++){var pr=parseFloat($('#pr_'+i).val());var adu=parseFloat($('#adu_'+i).val());var qty=parseFloat($('#qty_'+i).val());var e=(pr*adu*qty)/1000;total+=e};$('#result').html(total.toFixed(2)+" кВт*ч")});function add_row(){r_id++;var row="";row+='<tr id="appl_'+r_id+'">';row+='<td><select id="_'+r_id+'" class="form-control">';for(var i=0;i<num_of_appliances;i++){row+='<option value="'+appliances_data[i].id+'">'+appliances_data[i].appliance_name+'</option>'}
row+='</select></td>';row+='<td><input id="pr_'+r_id+'" class="form-control" type="number" step="0.01" value="'+appliances_data[0].power_rating+'"></td>';row+='<td><input id="adu_'+r_id+'" class="form-control" type="number" step="0.01" value="'+appliances_data[0].average_daily_usage+'"></td>';row+='<td><input id="qty_'+r_id+'" class="form-control" type="number" step="1" value="0"></td>';row+='</tr>';$('#wpeuc_table').append(row)}
function remove_row(){if(r_id>1){$('#appl_'+r_id).remove();r_id--}}})(jQuery)
;